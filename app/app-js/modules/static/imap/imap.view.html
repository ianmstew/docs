<h1>IMAP Server Settings</h1>

<h4>Please enter your mail server information:</h4>
<!--<a href="javascript:void(0);" class="modal">Why do I need to give you this?</a></p> -->
<!--<div id='messageContainer'>
<% if (message) { %>
<p><span class="error"><%= message %></span></p>
<% } %>
</div>-->

<form class="form-imap" name='loginForm' action="/auth/imap/callback" method="post" onsubmit="return validateLogin()" role="form">
	<div class="form-group">
		<label for="username" class="col-sm-2 control-label">Username:</label>
		<div class="col-sm-10">
			<input class="form-control" type="text" name="username" {{ #username }}value="{{ username }}"{{ /username }} placeholder="Your email login name" />
		</div>
	</div>
	<div class="form-group">
		<label for="password" class="col-sm-2 control-label">Password:</label>
		<div class="col-sm-10">
			<input class="form-control" type="password" name="password"/>
		</div>
	</div>
  <div class="form-group">
	  <label for="server" class="col-sm-2 control-label">Server:</label>
	  <div class="col-sm-10">
			<input class="form-control" type="text" name="server" {{ #host }}value="{{ host }}"{{ /host }} placeholder="mail.yourserver.com"/>
		</div>
  </div>
  <div class="form-group">
	  <label class="col-sm-2 control-label" for="port">Port:</label>
	  <div class="col-sm-10">
			<div class="form-inline">
				<input class="form-control" type="text" name="port" {{ #port }}port value="{{ port }}"{{ /port }} {{ ^port }}value="993"{{ /port }} />
				<div class="checkbox">
					<label>
						<input type="checkbox"> Remember me
					</label>
				</div><!-- /.checkbox -->
			</div><!-- /.form-inline -->
		</div>
  </div>
	<div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn-green">Submit</button>
    </div>
	</div>
</form>

<script language="javascript">
  function validateLogin()
  {
    var username = document.forms['loginForm']['username'].value;
    var password = document.forms['loginForm']['password'].value;

    if( username == null || username =='' || password==null || password == '' )
    {
        $( '#messageContainer' ).html( '<p><span class="error">You must provide both a username and password.</span></p>' );
        return false;
    }
  }

  $(document).ready(function() {
    //Change these values to style your modal popup
    var source = "/imapLoginExplanation.html";
    var width = 400;
    var align = "center";
    var top = 100;
    var padding = 10;
    var backgroundColor = "#FFFFFF";
    var borderColor = "#000000";
    var borderWeight = 4;
    var borderRadius = 5;
    var fadeOutTime = 300;
    var disableColor = "#666666";
    var disableOpacity = 40;
    var loadingImage = "/loading.gif";

    //This method initialises the modal popup
    $(".modal").click(function() {

        modalPopup( align,
		    top,
		    width,
		    padding,
		    disableColor,
		    disableOpacity,
		    backgroundColor,
		    borderColor,
		    borderWeight,
		    borderRadius,
		    fadeOutTime,
		    source,
		    loadingImage );

    });

    //This method hides the popup when the escape key is pressed
    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closePopup(fadeOutTime);
        }
    });

  });

</script>
